# 监控界面“注册”规范（四大类条目）

本规范按照四个大类（外置服务代理、内置服务代理、内置服务、外置信息代理）对接入算法进行表格化记录，并给出注册字段与上报方式说明。字段取自 `algorithm_data.json`（模板与运行期写入）。

## 字段总览（适用于四类）
| 字段 | 说明 |
|---|---|
| `category` | 集成方式（外置服务代理/内置服务代理/内置服务/外置信息代理） |
| `class` | 业务类别（如：大模型类/认知识别类/自主决策类/协同控制类） |
| `subcategory` | 算法类别（如：大型语言模型/状态估计类/聚类分析类） |
| `version` | 算法版本 |
| `creator` / `maintainer` | 创建者 / 维护者 |
| `description` | 算法描述 |
| `inputs` / `outputs` | 参数结构（name/symbol/type/dimension/description） |
| `network_info` | 网络与状态信息：`ip/port/status/last_update_timestamp/cpu_usage/memory_usage/gpu_usage/is_remote` |
| 上报方式 | UDP心跳（默认 12345）或TCP直连（模板脚本示例） |
| 是否写入JSON | 外部/代理类必须写入；内置服务建议预置元数据 |

---

## 外置服务代理（示例与清单）
| 算法/代理名称 | class | subcategory | version | is_remote | IP | 端口 | 状态 | 上报方式 | 是否写入JSON |
|---|---|---|---|---|---|---|---|---|---|
| Qwen2.5大模型 | 大模型类 | 大型语言模型 | 2.5 | false | 127.0.0.1 | — | 空闲 | TCP（生成脚本） | 是 |
| Qwen UDP客户端（AlgSrvProxy_qwen.py） | 大模型类 | 大型语言模型 | — | true | 180.1.80.241 | 5555 | — | 无（仅与服务交互） | 否 |
| 大模型代理（AlgSrvProxy_qwen_generated.py） | 大模型类 | 大型语言模型 | — | true | 192.168.1.100 | 12345 | — | TCP直连注册 | 是 |
| 通用代理模板（AlgSrvProxy__generated.py） | 代理类 | — | — | true | 192.168.1.100 | 12345 | — | TCP直连注册 | 是 |

说明：
- 运行期推荐通过 UDP 心跳向注册服务上报，监听 `0.0.0.0:12345`（或部署IP:端口），频率 1–5 秒；模板脚本示例采用 TCP 直连也可兼容。
- 代理类条目须在 `network_info` 中携带 `is_remote=true`（或根据部署实际填写）。

---

## 内置服务代理（本地服务封装）
| 代理名称 | 关联算法 | class | subcategory | is_remote | IP | 端口 | 状态 | 上报方式 | 是否写入JSON |
|---|---|---|---|---|---|---|---|---|---|
| AlgSrv_kmeans_generated.py | K_means算法 | 认知识别类 | 聚类分析类 | false | 127.0.0.1 | 8080–8100 | 空闲 | 本地进程采集/可选心跳 | 建议预置 |
| AlgSrv_HawkDoveGameAlgorithm_generated.py | 鹰鸽博弈算法 | 自主决策类 | 对抗决策类 | false | 127.0.0.1 | 8080–8100 | 空闲 | 本地进程采集/可选心跳 | 建议预置 |
| AlgSrv_Notspecified_generated.py | 扩展卡尔曼滤波算法 | 认知识别类 | 状态估计类 | false | 127.0.0.1 | 8080–8100 | 空闲 | 本地进程采集/可选心跳 | 建议预置 |

说明：
- 内置服务代理为本地算法的对外封装或与监控的对接组件；默认本地端口分配在 `8080–8100`，由 UI 启动与采集资源。
- 可在启动时同步写入 `algorithm_data.json` 或发送 UDP 心跳以形成统一“注册”。

---

## 内置服务（本地算法）

| 算法名称 | class | subcategory | version | is_remote | IP | 端口 | 状态 | 是否写入JSON |
|---|---|---|---|---|---|---|---|---|
| 扩展卡尔曼滤波算法 | 认知识别类 | 状态估计类 | 2.0 | false | 127.0.0.1 | 8080–8100 | 空闲 | 建议预置 |
| K_means算法 | 认知识别类 | 聚类分析类 | 1.3 | false | 127.0.0.1 | 8080–8100 | 空闲 | 建议预置 |
| 鸽群优化算法 | 自主决策类 | 智能优化类 | 1.2 | false | 127.0.0.1 | 8080–8100 | 空闲 | 建议预置 |
| 微分博弈算法 | 自主决策类 | 对抗决策类 | 1.5 | false | 127.0.0.1 | 8080–8100 | 空闲 | 建议预置 |
| 鹰鸽博弈算法 | 自主决策类 | 对抗决策类 | 1.1 | false | 127.0.0.1 | 8080–8100 | 空闲 | 建议预置 |
| 拍卖算法（本地版本） | 自主决策类 | 任务分配类 | 1.0 | false | 127.0.0.1 | 8080–8100 | 空闲 | 建议预置 |
| 深度强化学习算法 | 自主决策类 | 强化学习类 | 1.0.0 | true | 180.1.80.2 | 9091 | 离线 | 建议预置 |

说明：
- 以上条目来自模板 JSON 与本地示例脚本；实际端口与状态由 UI 启动与资源采集确定。
- 本地算法不强制写入 `algorithm_data.json`，但建议预置元数据用于树形展示。

---

## 外置信息代理（数据/信息上报）
| 算法/代理名称 | class | subcategory | version | is_remote | IP | 端口 | 状态 | 上报方式 | 是否写入JSON |
|---|---|---|---|---|---|---|---|---|---|
| YOLO算法（信息代理） | 认知识别类 | 目标检测类 | 1.0.0 | true | 192.168.75.136 | 9090 | 离线 | TCP直连注册 | 是 |
| 拍卖算法（信息代理） | 自主决策类 | 任务分配类 | 1.0 | false | 127.0.0.1 | — | 空闲 | TCP/UDP皆可 | 是 |
| AlgInfoProxy_YOLO_generated.py | 认知识别类 | 目标检测类 | — | true | 192.168.1.100 | 12345 | — | TCP直连注册 | 是 |
| AlgInfoProxy__generated.py | 自主决策类 | 任务分配类 | — | true | 192.168.1.100 | 12345 | — | TCP直连注册 | 是 |

说明：
- 外置信息代理用于将外部信息/结果写入 `algorithm_data.json` 并供监控展示；建议频率 1–5 秒并维护 `last_update_timestamp`。

---

## 上报协议与状态维护
- 监听：默认 `0.0.0.0:12345/UDP`；模板脚本亦支持 `TCP` 直连上报。
- 频率：心跳 1–5 秒；监控平台超时阈值 8 秒，超时状态置为“离线”。
- 状态值：统一使用 `空闲/调用/离线/无法监控/未知状态`。
- 网络字段：外部/代理类请务必携带 `network_info.is_remote=true`，并按需填充 `ip/port/cpu_usage/memory_usage/gpu_usage`。

## 资源占用字段与单位（补充）
| 字段 | 类型 | 单位 | 说明 | 建议 |
|---|---|---|---|---|
| `cpu_usage` | float | % | 进程/服务整体 CPU 占用（0–100） | 必填（能采集则填） |
| `memory_usage` | float | % | 进程/服务内存占用百分比（0–100） | 必填（能采集则填） |
| `gpu_usage` | float 或 list | % 或 MB | 单 GPU 用百分比；多 GPU 用对象数组 | 可选（无 GPU 可省略或置 0） |

说明：
- 采集来源：本地服务建议通过 `psutil`（CPU/内存）与 `pynvml` 或 `nvidia-smi`（GPU）采集；外置代理按自身环境采集后上报。
- 进程 vs 系统：如能获取“进程级”指标优先使用进程级；否则可上报系统级整体。
- 多 GPU：`gpu_usage` 推荐为对象数组，详见下表；单 GPU 可直接给出百分比。

### GPU 对象结构（多卡）
| 字段 | 类型 | 单位 | 说明 |
|---|---|---|---|
| `index` | int | — | GPU 索引（从 0 开始） |
| `name` | str | — | GPU 名称（例如 NVIDIA RTX 3080） |
| `usage` | float | % | GPU 核心利用率（0–100） |
| `memory_used_mb` | int | MB | GPU 显存使用 |
| `memory_total_mb` | int | MB | GPU 显存总量 |

---

## UDP 心跳 JSON 示例（含资源字段）
{
  "name": "Qwen2.5大模型",
  "category": "外置服务代理",
  "class": "大模型类",
  "subcategory": "大型语言模型",
  "version": "2.5",
  "creator": "system",
  "description": "LLM 推理服务",
  "inputs": [{"name": "提示词", "symbol": "prompt", "type": "str", "dimension": 1}],
  "outputs": [{"name": "回复内容", "symbol": "response", "type": "str", "dimension": 1}],
  "network_info": {
    "ip": "192.168.1.100",
    "port": 12345,
    "status": "空闲",
    "is_remote": true,
    "last_update_timestamp": 1729468000,
    "cpu_usage": 42.7,
    "memory_usage": 65.2,
    "gpu_usage": [
      {"index": 0, "name": "NVIDIA RTX 3080", "usage": 72.1, "memory_used_mb": 4200, "memory_total_mb": 10000}
    ]
  }
}

## UI 列映射补充
- `CPU占用` → `network_info.cpu_usage`（显示百分比）。
- `内存占用` → `network_info.memory_usage`（显示百分比）。
- `GPU占用` → `network_info.gpu_usage`：
  - 单值时直接显示百分比；
  - 数组时显示最大/平均值（建议用最大值），或在详情中展开各卡信息。

## 维护建议
- 统一分类：`category/class/subcategory` 必填，以保证树形结构与表格列正常展示。
- 本地算法：建议在模板 JSON 预置条目；运行期由 UI 启动与采集，无需频繁写入 JSON。
- 外部/代理类：按心跳或直连模式写入 JSON；保持时间戳更新以避免被标记“离线”。

---

## 输入输出详情（按四类划分）

### 外置服务代理

#### Qwen2.5大模型
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 提示词 | prompt | 字符串 | 1 |  |
| 系统信息 | system | 字符串 | 1 | 系统角色设定和任务描述 |
| 历史对话 | history | list | 1 | 之前的对话历史记录 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 回复内容 | response | str | 1 | 模型生成的回复内容 |
| 置信度 | confidence | int | 1 | 模型对回复内容的置信度 |

#### 代理生成脚本（AlgSrvProxy_qwen_generated.py / AlgSrvProxy__generated.py）
- 说明：该类脚本主要负责“元数据注册/转发”，无固定业务输入输出；具体 IO 以被代理算法为准。

#### Qwen UDP客户端（AlgSrvProxy_qwen.py）
- 说明：为与大模型服务的交互客户端，输入为用户文本消息，输出为服务器响应（分段或完整 JSON），不直接构成监控注册条目。

---

### 内置服务代理（按关联算法）

#### K_means算法（代理封装）
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 惯性数据 | IMU | double | 1 | mxn |
| GPS数据 | GPS | double | 1 | GPS位置数据 |
| 图像地址 | img_path | int8 | 1 | 图像文件路径 |
| 时间戳 | t | vector | 秒 | 数据采集时间戳 |
| 簇数量 | K | std::vector<int> | 1 | 期望的聚类数量 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 物体类别标签 | labels | vector | 1 | 识别的物体类别标签 |
| 物体绝对位置 | positions | double | 位置 | 各物体的绝对位置坐标 |
| 物体加速度 | accel | double | 米每平方秒 | 各物体的加速度 |
| 置信度 | confidence | vector | 1 | 各物体识别的置信度 |

#### 鹰鸽博弈算法（代理封装）
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 收益矩阵 | R | 矩阵 | 1 | 博弈双方策略的收益矩阵 |
| 初始策略分布 | S_0 | 向量 | 1 | 初始策略分布概率 |
| 资源价值 | V | 标量 | 1 | 争夺资源的价值 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 平衡策略 | S_eq | 向量 | 1 | 演化稳定的策略分布 |
| 期望收益 | E | 标量 | 1 | 平衡策略下的期望收益 |

#### 扩展卡尔曼滤波算法（代理封装）
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 初始速度 | v_0 | std::vector<int> | 米每秒 | m/s |
| 初始位置估计 | x_0 | 向量 | 位置 | 系统初始位置估计 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 最优速度估计 | v_est | 向量 | 米每秒 | 滤波后的最优速度估计 |
| 最优位置估计 | x_est | 向量 | 位置 | 滤波后的最优位置估计 |
| 最优协方差估计 | P | 矩阵 | 1 | 状态估计的协方差矩阵 |

---

### 内置服务（本地算法）

#### 扩展卡尔曼滤波算法
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 初始速度 | v_0 | std::vector<int> | 米每秒 | m/s |
| 初始位置估计 | x_0 | 向量 | 位置 | 系统初始位置估计 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 最优速度估计 | v_est | 向量 | 米每秒 | 滤波后的最优速度估计 |
| 最优位置估计 | x_est | 向量 | 位置 | 滤波后的最优位置估计 |
| 最优协方差估计 | P | 矩阵 | 1 | 状态估计的协方差矩阵 |

#### K_means算法
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 惯性数据 | IMU | double | 1 | mxn |
| GPS数据 | GPS | double | 1 | GPS位置数据 |
| 图像地址 | img_path | int8 | 1 | 图像文件路径 |
| 时间戳 | t | vector | 秒 | 数据采集时间戳 |
| 簇数量 | K | std::vector<int> | 1 | 期望的聚类数量 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 物体类别标签 | labels | vector | 1 | 识别的物体类别标签 |
| 物体绝对位置 | positions | double | 位置 | 各物体的绝对位置坐标 |
| 物体加速度 | accel | double | 米每平方秒 | 各物体的加速度 |
| 置信度 | confidence | vector | 1 | 各物体识别的置信度 |

#### 鸽群优化算法
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 无人机初始位置 | P_0 | 矩阵 | 位置 | 无人机群的初始位置坐标 |
| 目标终点位置 | G | 向量 | 位置 | 任务目标位置 |
| 障碍物位置 | O | 矩阵 | 位置 | 环境中障碍物的位置坐标 |
| 障碍物半径 | R | 向量 | 位置 | 各障碍物的有效半径 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 无人机飞行轨迹 | trajectory | 矩阵 | 1 | 无人机的飞行轨迹坐标序列 |
| 任务完成状态 | completed | 布尔值 | 1 | 是否成功完成任务 |

#### 微分博弈算法
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 无人机初始位置 | P_0 | 向量 | 位置 | 无人机的初始位置坐标 |
| 目标初始位置 | T_0 | 向量 | 位置 | 目标的初始位置坐标 |
| 初始速度 | V_0 | 向量 | 米每秒 | 无人机的初始速度 |
| 策略参数 | alpha | 标量 | 1 | 博弈中的关键策略参数 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 无人机对抗策略参数 | strategy_params | 向量 | 1 | 无人机对抗决策的策略参数集 |

#### 鹰鸽博弈算法
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 收益矩阵 | R | 矩阵 | 1 | 博弈双方策略的收益矩阵 |
| 初始策略分布 | S_0 | 向量 | 1 | 初始策略分布概率 |
| 资源价值 | V | 标量 | 1 | 争夺资源的价值 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 平衡策略 | S_eq | 向量 | 1 | 演化稳定的策略分布 |
| 期望收益 | E | 标量 | 1 | 平衡策略下的期望收益 |

#### 拍卖算法（本地版本）
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 无人机数量 | n_uav | 标量 | 个 | 参与任务的无人机数量 |
| 任务数量 | n_task | 标量 | 个 | 需要分配的任务数量 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 任务分配结果 | allocation | 矩阵 | 1 | 无人机与任务的分配结果矩阵 |

#### 深度强化学习算法
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 提示词 | prompt | str | 1 | 用户输入的提示词或指令 |
| 系统信息 | system | str | 1 | 系统角色设定和任务描述 |
| 历史对话 | history | list | 1 | 之前的对话历史记录 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 回复内容 | response | str | 1 | 模型生成的回复内容 |
| 置信度 | confidence | int | 1 | 模型对回复内容的置信度 |

---

### 外置信息代理

#### YOLO算法（信息代理）
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 提示词 | prompt | 字符串 | 1 | 用户输入的提示词或指令 |
| 系统信息 | system | 字符串 | 1 | 系统角色设定和任务描述 |
| 历史对话 | history | 列表 | 1 | 之前的对话历史记录 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 回复内容 | response | 字符串 | 1 | 模型生成的回复内容 |
| 置信度 | confidence | 标量 | 1 | 模型对回复内容的置信度 |

#### 拍卖算法（信息代理）
- 输入参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 无人机数量 | n_uav | 标量 | 个 | 参与任务的无人机数量 |
| 任务数量 | n_task | 标量 | 个 | 需要分配的任务数量 |

- 输出参数

| name | symbol | type | dimension | description |
|---|---|---|---|---|
| 任务分配结果 | allocation | 矩阵 | 1 | 无人机与任务的分配结果矩阵 |

#### 信息代理生成脚本（AlgInfoProxy_YOLO_generated.py / AlgInfoProxy__generated.py）
- 说明：该类脚本负责将算法元数据/实验数据打包并注册到监控平台，业务 IO 以被代理算法条目为准。
